{"version":3,"sources":["magic/helpers/formulaHelpers.js","redux/reducers/initialState.js","redux/actions/constants.js","magic/helpers/gridHelpers.js","magic/helpers/fileHelpers.js","magic/helpers/jump.js","magic/helpers/viewportHelpers.js","redux/reducers/allReducers.js","redux/reducers/gridReducer.js","redux/store/configureStore.js","components/Tools/ShiftGrid.jsx","redux/actions/actions.js","components/Tools/ToolBar.jsx","components/Viewport/Cells/HeaderCell.jsx","components/Viewport/Rows/HeaderRow.jsx","components/Viewport/HeaderColumn.jsx","components/Viewport/Cells/HeaderCorner.jsx","components/Viewport/Cells/CellEditor.jsx","components/Viewport/Cells/Cell.jsx","components/Viewport/Rows/Row.jsx","components/Viewport/Rows/Rows.jsx","components/Viewport/KeyBindings.jsx","components/Viewport/Viewport.jsx","App.jsx","index.js"],"names":["isFormula","string","removeLeadingEquals","slice","ABCS","split","colFromLetters","letters","length","indexOf","colLetterFromNumber","origNum","num","ret","a","b","String","fromCharCode","parseInt","cellToRowCol","cell","rowNumber","abcRe","splits","index","char","search","push","toUpperCase","colLetters","join","col","Number","CELL_REFERENCE_REGEX","updateGrid","grid","changedCells","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","changedCell","value","row","err","return","updateCellAndGrid","props","action","oldCell","Object","_Users_lcvista_dev_rcell_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","cellValues","parseAndEvaluate","newCell","parseCellValues","_ref","matched","match","cellReferenceLocation","cellRow","cellCol","cellValue","calculatedValue","replace","checkProviderWasVisited","provider","visiteds","getNewProviders","working","exec","results","Set","add","_Users_lcvista_dev_rcell_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","map","checkCyclic","rc","providers","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_Users_lcvista_dev_rcell_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","acyclic","_ref2","newProviders","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_ref3","error","withCellValues","eval","enteredValue","displayValue","getStartingWidths","totalCols","widths","colIdx","getStartingHeights","totalRows","heights","rowIdx","blankState","cursorLocation","editingLocation","values","objectSpread","dependents","getStartingGridValues","gridShifted","viewport","viewportBottom","viewportRight","localState","localStorage","getItem","initialState","JSON","parse","totalRow","SET_CURSOR","SET_EDITING","RESET_STARTING_EDITOR_VALUE","SET_VALUE","SCROLL","JUMP","TOGGLE_SHIFT_GRID","REFRESH_VIEWPORT","UP","DOWN","LEFT","RIGHT","offGrid","state","proposedLocation","console","log","concat","checkEdge","direction","newCursorLocation","setLocalStorage","fileName","setItem","stringify","jump","nextCellEmpty","_cellEmpty","location","_nextNonEmptyCol","Math","min","max","_nextNonEmptyCellFollowedByEmpty","scroll","newState","_state$viewport","slicedToArray","viewportRow","viewportCol","getViewportBottom","getViewportRight","width","counter","idx","window","outerWidth","getViewportLeft","getViewportTop","height","outerHeight","innerHeight","validatedViewPort","_ref4","newViewport","offViewport","toConsumableArray","updated","checkOffViewport","onEdge","checkEdges","rootReducer","combineReducers","arguments","type","off","cellEditorStartingValue","newGrid","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ShiftGrid","actions","react_default","createElement","className","onClick","toggleShiftGrid","setCursor","setEditing","resetStartingEditorValue","setValue","refreshViewportDimensions","ToolBar","this","React","Component","connect","dispatch","bindActionCreators","HeaderCell","renderLabel","_this$props","_this","getClass","isCursor","getStyle","colWidth","style","HeaderRow","totalDisplayCols","renderHeaderCells","cols","Cells_HeaderCell","key","HeaderColumn","totalViewportRows","viewportRows","HeaderCorner","propTypes","PropTypes","object","CellEditor","handleChange","e","cursor","target","selectionStart","setState","handleEnter","handleEsc","handleTab","_this$props2","handleKeyPress","charCode","preventDefault","handleKeyDown","onChange","onKeyPress","onKeyDown","autoFocus","onFocus","onBlur","PureComponent","Cell","flip","getContainerClass","setFlip","setTimeout","handleClick","handleDoubleClick","isEditing","editorValue","includes","onDoubleClick","Cells_CellEditor","Row","renderCells","Cells_Cell","shift","Rows","getRowProps","renderRows","rows","_this$getRowProps","Rows_Row","debounced","fn","wait","debounce","apply","KeyBindings","keyMap","wheel","deltaX","deltaY","keyUp","removeKey","keyCode","isCommandKeyPressed","addKey","keyDown","moveCursor","handleBackspace","enterEdit","_moveCursor","newLocation","_scroll","bind","assertThisInitialized","addEventListener","Viewport","scrollX","scrollY","Viewport_KeyBindings","HeaderCorner_HeaderCorner","Rows_HeaderRow","Viewport_HeaderColumn","Viewport_Rows_Rows","App","Tools_ToolBar","components_Viewport_Viewport","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.a00008f0.chunk.js","sourcesContent":["/* eslint no-eval: 0 */\n\nconst isFormula = (string) => {\n    if (typeof string !== 'string') return false\n    return string[0] === '='\n    \n}\n\nconst removeLeadingEquals = (string) => {\n    if (string[0] !== '=') return string\n    return string.slice(1)\n}\n\nconst ABCS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('')\nexport const colFromLetters = (string) => {\n    const letters = string.split('')\n    if (letters.length === 1) {\n        return ABCS.indexOf(letters[0])\n    }\n}\n\nexport const colLetterFromNumber = (origNum) => {\n    let num = origNum + 1\n    for (var ret = '', a = 1, b = 26; (num -= a) >= 0; a = b, b *= 26) {\n        ret = String.fromCharCode(parseInt((num % b) / a) + 65) + ret\n    }\n    return ret\n}\n\n\n\nexport const cellToRowCol = (cell) => {\n    const abcRe = /[a-zA-Z]/\n    const letters = []\n    let rowNumber\n    const splits = cell.split('')\n    for (let index = 0; index < splits.length; index++) {\n        const char = splits[index]\n        if (char.search(abcRe) < 0) {\n            rowNumber = cell.slice(index)\n            break\n        } else {\n            letters.push(char.toUpperCase())\n        }\n    }\n    const colLetters = letters.join('')\n    const col = colFromLetters(colLetters)\n    const row = Number((rowNumber - 1))\n    return [row, col]\n}\n\nconst CELL_REFERENCE_REGEX = /[a-zA-Z]+[0-9]+/ //number and a letter adjacent i.e. C3, AE111, etc.\n\n// export const updateDependentsOfProviders = (grid, newCell, oldCell) => {\n//     let oldProviders = oldCell.providers\n//     let newProviders = newCell.providers\n//     for (let oldProvider of oldProviders) {\n//         if (!newProviders.includes(oldProvider)) {\n\n//         }\n//     }\n// }\n\n\nexport const updateGrid = (grid, changedCells) => {\n    for (let changedCell of changedCells) {\n        grid[changedCell.row][changedCell.col] = changedCell\n    }\n    return grid\n}\n\nexport const updateCellAndGrid = (props) => {\n    const action = props.action\n    let grid = props.grid\n    const oldCell = { ...grid[action.row][action.col] }\n    const cellValues = parseAndEvaluate({ action, grid })\n    const changedCells = []\n    const newCell = {\n        ...oldCell,\n        ...cellValues,\n    }\n    changedCells.push(newCell)\n    /**\n     * leaving off here...\n     * I need to update the dependents prop on all the old/newproviders (delete, add)\n     * then i need recursively update all the dependents values -- figure out how to do this -- update children first, then recursive call\n     */\n    \n\n    // grid = updateDependentsOfProviders(grid, newCell, oldCell)\n    // if (!cellValues.error) {\n    //     //iterate through dependents\n    // }\n    return updateGrid(grid, changedCells)\n\n    ///update dependents of providers based on new/old\n    /// at reducer level, update all dependents\n}\n\nexport const parseCellValues = ({ value, grid }) => {\n    const matched = value.match(CELL_REFERENCE_REGEX)\n    if (matched === null) return value\n    const cell = matched[0]\n    const cellReferenceLocation = cellToRowCol(cell)\n    const cellRow = cellReferenceLocation[0]\n    const cellCol = cellReferenceLocation[1]\n    const cellValue = String(grid[cellRow][cellCol].calculatedValue)\n    const newValue = value.replace(cell, cellValue)\n    return parseCellValues({ value: newValue, grid })\n}\n\nexport const checkProviderWasVisited = (provider, visiteds) => {\n    return visiteds[provider[0]] && visiteds[provider[0]][provider[1]]\n}\n\nconst getNewProviders = (string) => {\n\n    let working = removeLeadingEquals(string)\n    let matched = CELL_REFERENCE_REGEX.exec(working)\n    const results = new Set()\n    while (matched) {\n        results.add(matched[0])\n        working = working.replace(matched[0], '')\n        matched = CELL_REFERENCE_REGEX.exec(working)\n    }\n    return [...results].map(cellToRowCol)\n}\n\nexport const checkCyclic = (rc, grid, visiteds) => {\n    const cell = grid[rc[0]][rc[1]]\n    const providers = cell.providers || []\n    if (providers.length === 0) return false\n    for (let provider of providers) {\n        if (checkProviderWasVisited(provider, visiteds)) {\n            return true\n        }\n        visiteds[rc[0]] = {\n            ...visiteds[rc[0]],\n            [rc[1]]: true,\n        }\n        if (checkCyclic(provider, grid, visiteds)) {\n            return true\n        }\n    }\n    return false\n}\n\nexport const acyclic = ({ action, grid }) => {\n    // debugger\n    const visiteds = {\n        [action.row]: {\n            [action.col]: true\n        }\n    }\n    const newProviders = getNewProviders(action.value)\n    for (let provider of newProviders) {\n        if (checkCyclic(provider, grid, visiteds)) return false\n    }\n    return true\n    \n}\n\nexport const parseAndEvaluate = ({ action, grid }) => {\n    let calculatedValue\n    let error\n    if (action.value !== undefined && isFormula(action.value)) {\n        if (acyclic({action, grid})) {\n            const withCellValues = parseCellValues({ value: removeLeadingEquals(action.value), grid })\n            try {\n                calculatedValue = eval(withCellValues)\n            }\n            catch (err) {\n                calculatedValue = '!!ERROR'\n                error = '!!ERROR'\n            }\n        } else {\n            calculatedValue = '!!Circular Reference'\n            error = '!!Circular Reference'\n        }\n    } else {\n        calculatedValue = action.value\n    }\n    const providers = getNewProviders(action.value)\n\n    return {\n        providers,\n        calculatedValue,\n        enteredValue: action.value,\n        displayValue: calculatedValue,\n        error,\n    }\n}\n","const totalCols = 100\nconst totalRows = 100\n\nconst getStartingWidths = (totalCols) => {\n    const widths = []\n    for (let colIdx = 0; colIdx < totalCols; colIdx++) {\n      widths.push(100)\n    }\n    return widths\n}\n\nconst getStartingHeights = (totalRows) => {\n    const heights = []\n    for (let rowIdx = 0; rowIdx < totalCols; rowIdx++) {\n      heights.push(27)\n    }\n    return heights\n}\n\nconst getStartingGridValues = (totalCols, totalRows) => {\n    const grid = []\n    for (let rowIdx = 0; rowIdx < totalRows; rowIdx++) {\n      const row = []\n      for (let colIdx = 0; colIdx < totalCols; colIdx++) {\n          row.push({\n            enteredValue: '',\n            displayValue: '',\n            calculatedValue: '',\n            row: rowIdx,\n            col: colIdx,\n          })\n      }\n      grid.push(row)\n    }\n    grid[0][0] = {\n        ...grid[0][0],\n        enteredValue: '=b1',\n        displayValue: 1,\n        calculatedValue: 1,\n        providers: [[0,1]]\n    }\n    grid[0][1] = {\n        ...grid[0][1],\n        enteredValue: '1',\n        displayValue: 1,\n        calculatedValue: 1,\n        dependents: [[0,0]]\n    }\n    return grid\n}\n\n\nconst blankState = {\n    totalRows,\n    totalCols,\n    cursorLocation: [0,0],\n    editingLocation: false,\n    values: getStartingGridValues(totalCols, totalRows),\n    gridShifted: false,\n    viewport: [0,0],\n    viewportBottom: null,\n    viewportRight: null,\n    widths: getStartingWidths(totalCols),\n    heights: getStartingHeights(totalRows),\n}\n\nconst localState = localStorage.getItem('xxxrcell')\nconst initialState = localState ? JSON.parse(localState) : blankState\ninitialState.viewportRight = 20\ninitialState.viewportBottom = 20\ninitialState.widths = getStartingWidths(initialState.totalCols)\ninitialState.heights = getStartingHeights(initialState.totalRow)\ninitialState.viewport = [0, 0]\ninitialState.cursorLocation = [0, 0]\nexport default initialState","export const FETCH_STUFF = 'FETCH_STUFF'\nexport const RECEIVE_STUFF = 'RECEIVE_STUFF'\n\nexport const SET_CURSOR = 'SET_CURSOR'\nexport const SET_EDITING = 'SET_EDITING'\nexport const RESET_STARTING_EDITOR_VALUE = 'RESET_STARTING_EDITOR_VALUE'\nexport const SET_VALUE = 'SET_VALUE'\n\nexport const SCROLL = 'SCROLL'\n\nexport const JUMP = 'JUMP'\n\nexport const TOGGLE_SHIFT_GRID = 'TOGGLE_SHIFT_GRID'\n\nexport const REFRESH_VIEWPORT = 'REFRESH_VIEWPORT'\n\nexport const UP = 'up'\nexport const DOWN = 'down'\nexport const LEFT = 'left'\nexport const RIGHT = 'right'\n","export const offGrid = (state, proposedLocation) => {\n    const ret = (\n        proposedLocation[0] < 0 ||\n        proposedLocation[0] >= state.totalRows ||\n        proposedLocation[1] < 0 ||\n        proposedLocation[1] >= state.totalCols\n    )\n    console.log(`${ret ? 'OFFGRID!' : ''}`)\n    return ret\n}\n\nconst checkEdge = (direction, state, newCursorLocation) => {\n    switch (direction) {\n        case 'left':\n            return newCursorLocation[1] === state.viewport[1] - 1\n\n        case 'right':\n            return newCursorLocation[1] === state.viewportRight\n\n        case 'top':\n            return newCursorLocation[0] === state.viewport[0] - 1\n\n        case 'bottom':\n            return newCursorLocation[0] === state.viewportBottom\n\n        default:\n            return false\n    }\n}\n\nexport const checkEdges = ({state, newCursorLocation}) => {\n    const newViewport = [...state.viewport]\n    let updated = false\n    if (checkEdge('left', state, newCursorLocation)) {\n        updated = true\n        newViewport[1] -= 1\n    }\n    if (checkEdge('right', state, newCursorLocation)) {\n        if (state.cursorLocation[1] < newCursorLocation[1]) {\n            updated = true\n            newViewport[1] += 1\n        }\n    }\n    if (checkEdge('top', state, newCursorLocation)) {\n        updated = true\n        newViewport[0] -= 1\n    }\n    if (checkEdge('bottom', state, newCursorLocation)) {\n        if (state.cursorLocation[0] < newCursorLocation[0]) {\n            updated = true\n            newViewport[0] += 1\n        }\n    }\n    return updated && newViewport\n\n\n}\n","export const setLocalStorage = (fileName, state) => {\n    localStorage.setItem('rcell', JSON.stringify(state))\n}","import {\n    UP,\n    DOWN,\n    LEFT,\n    RIGHT,\n} from '../../redux/actions/constants';\n\nexport const jump = (direction, state) => {\n    const {\n        cursorLocation,\n        values,\n        totalCols,\n        totalRows,\n    } = state\n\n    const _cellEmpty = (location) => {\n        return values[location[0]][location[1]].enteredValue === ''\n    }\n\n    const _nextNonEmptyCol = (row, col, direction) => {\n        let colIdx\n        let rowIdx\n        if (direction === RIGHT) {\n            colIdx = col + 1\n            while (colIdx < totalCols) {\n                if (!_cellEmpty([row, colIdx])) {\n                    return [row, colIdx]\n                }\n                colIdx++\n            }\n            return [row, Math.min(colIdx, (totalCols - 1))]\n        } else if (direction === LEFT) {\n            colIdx = col - 1\n            while (colIdx >= 0) {\n                if (!_cellEmpty([row, colIdx])) {\n                    return [row, colIdx]\n                }\n                colIdx--\n            }\n            return [row, Math.max(colIdx, 0)]\n        } else if (direction === DOWN) {\n            rowIdx = row + 1\n            while (rowIdx < totalRows) {\n                if (!_cellEmpty([rowIdx, col])) {\n                    return [rowIdx, col]\n                }\n                rowIdx++\n            }\n            return [Math.min(rowIdx, (totalRows - 1)), col]\n        } else if (direction === UP) {\n            rowIdx = row - 1\n            while (rowIdx >= 0) {\n                if (!_cellEmpty([rowIdx, col])) {\n                    return [rowIdx, col]\n                }\n                rowIdx--\n            }\n            return [0, col]\n        }\n    }\n\n    const _nextNonEmptyCellFollowedByEmpty = (row, col, direction) => {\n        let rowIdx\n        let colIdx\n        if (direction === RIGHT) {\n            colIdx = col + 2\n            while (colIdx < totalCols) {\n                if (_cellEmpty([row, colIdx])) {\n                    return [row, Math.min((totalCols - 1), (colIdx - 1))]\n                }\n                colIdx++\n            }\n            return [row, totalCols - 1]\n        } else if (direction === LEFT) {\n            colIdx = col - 2\n            while (colIdx >= 0) {\n                if (_cellEmpty([row, colIdx])) {\n                    return [row, Math.max(0, colIdx + 1)]\n                }\n                colIdx--\n            }\n            return [row, 0]\n        } else if (direction === DOWN) {\n            rowIdx = row + 2\n            while (rowIdx < totalRows) {\n                if (_cellEmpty([rowIdx, col])) {\n                    return [Math.min(totalRows - 1, rowIdx - 1), col]\n                }\n                rowIdx++\n            }\n            return [totalRows - 1, col]\n        } else if (direction === UP) {\n            rowIdx = row - 2\n            while (rowIdx >= 0) {\n                if (_cellEmpty([rowIdx, col])) {\n                    return [Math.max(0, rowIdx + 1), col]\n                }\n                rowIdx--\n            }\n            return [0, col]\n        }\n    }\n\n    let currCellEmpty\n    let nextCellEmpty\n    const [row, col] = [cursorLocation[0], cursorLocation[1]]\n\n    if (direction === RIGHT) {\n        if (col === totalCols - 1) return cursorLocation\n        nextCellEmpty = _cellEmpty([row, col + 1])\n    } else if (direction === LEFT) {\n        if (col === 0) return cursorLocation\n        nextCellEmpty = _cellEmpty([row, col - 1])\n    } else if (direction === DOWN) {\n        if (row === totalRows - 1) return cursorLocation\n        nextCellEmpty = _cellEmpty([row + 1, col])\n    } else if (direction === UP) {\n        if (row === 0) return cursorLocation\n        nextCellEmpty = _cellEmpty([row - 1, col])\n    }\n    currCellEmpty = _cellEmpty([row, col])\n    if (currCellEmpty) {\n        return _nextNonEmptyCol(row, col, direction)\n    } else if (nextCellEmpty) {\n        return _nextNonEmptyCol(row, col, direction)\n    } else {\n        return _nextNonEmptyCellFollowedByEmpty(row, col, direction)\n    }\n}\n","import {\n    UP,\n    DOWN,\n    LEFT,\n    RIGHT,\n} from '../../redux/actions/constants';\n\nimport {\n    checkEdges,\n} from '../helpers/gridHelpers'\n\n//Miscellaneous constants\nconst WIDTH_OFFSET_PX = 0\nconst HEIGHT_OFFSET_PX = 100\n\nexport const checkOffViewport = ({state, newCursorLocation}) => {\n    const {\n        viewport,\n        viewportRight,\n        viewportBottom,\n    } = state\n    const newViewport = [...viewport]\n    let updated = false\n    if (newCursorLocation[1] < viewport[1]) {\n        newViewport[1] = newCursorLocation[1]\n        updated = true\n    } else if (newCursorLocation[1] > viewportRight) {\n        newViewport[1] = newCursorLocation[1]\n        newViewport[1] = Math.min(getViewportLeft({ ...state, viewport: newViewport }), newViewport[1])\n        updated = true\n    }\n    if (newCursorLocation[0] < viewport[0]) {\n        newViewport[0] = newCursorLocation[0]\n        updated = true\n    } else if (newCursorLocation[0] > viewportBottom) {\n        newViewport[0] = newCursorLocation[0]\n        newViewport[0] = Math.min(getViewportTop({ ...state, viewport: newViewport }), newViewport[0])\n        updated = true\n    }\n    return updated && newViewport\n}\n\nexport const scroll = (action, state) => {\n    const {\n        viewportBottom,\n        viewportRight,\n        totalCols,\n        totalRows,\n        heights,\n        widths,\n    } = state\n\n    const [viewportRow, viewportCol] = state.viewport\n\n    let viewport\n    let newState\n    if (action.direction === UP) {\n        if (viewportRow === 0) return state\n        viewport = [(viewportRow - action.value), viewportCol]\n    } else if (action.direction === DOWN) {\n        if (viewportBottom === (totalRows)) return state\n        viewport = [(viewportRow + 1), viewportCol]\n    } else if (action.direction === LEFT) {\n        if (viewportCol === 0) return state\n        viewport = [viewportRow, (viewportCol - 1),]\n    } else if (action.direction === RIGHT) {\n        if (viewportRight === (totalCols)) return state\n        viewport = [viewportRow, (viewportCol + 1),]\n    }\n    newState = {\n        ...state,\n        viewport,\n    }\n    newState.viewportBottom = getViewportBottom({ heights, viewport, totalRows })\n    newState.viewportRight = getViewportRight({ widths, viewport, totalCols })\n    return newState\n\n}\n\nexport const getViewportRight = ({ widths, viewport, totalCols }) => {\n        let width = widths[viewport[1]]\n    let counter = viewport[1] + 1\n    for (let idx = counter; idx < totalCols; idx++) {\n        if ((width + widths[idx]) < window.outerWidth - WIDTH_OFFSET_PX) {\n            counter++\n            width += widths[idx]\n        } else {\n            break\n        }\n    }\n    return counter\n\n}\n\nexport const getViewportLeft = (state) => {\n    const {\n        widths,\n        viewport,\n    } = state\n    let width = widths[viewport[1]]\n    let counter = viewport[1] - 1\n    for (let idx = counter; idx > 0; idx--) {\n        if ((width + widths[idx]) < window.outerWidth - WIDTH_OFFSET_PX) {\n            counter--\n            width += widths[idx]\n        } else {\n            break\n        }\n    }\n    return counter + 1\n\n}\n\nexport const getViewportTop = (state) => {\n    const {\n        heights,\n        viewport,\n    } = state\n    let height = heights[viewport[1]]\n    let counter = viewport[0] - 1\n    for (let idx = counter; idx > 0; idx--) {\n        if ((height + heights[idx]) < window.outerHeight - HEIGHT_OFFSET_PX) {\n            counter--\n            height += heights[idx]\n        } else {\n            break\n        }\n    }\n    return counter + 5 // hmm this is a little weird here ... why plus 5?\n\n}\n\nexport const getViewportBottom = ({ heights, viewport, totalRows }) => {\n    let height = heights[viewport[0]]\n    let counter = viewport[0] + 1\n    for (let idx = counter; idx < totalRows; idx++) {\n        if ((height + heights[idx]) < window.innerHeight - HEIGHT_OFFSET_PX) {\n            counter++\n            height += heights[idx]\n        } else {\n            break\n        }\n    }\n    return counter\n}\n\nexport const validatedViewPort = ({ state, newCursorLocation }) => {\n    let newViewport = false\n    const offViewport = checkOffViewport({ state, newCursorLocation }) // returns false or new viewport values\n    if (offViewport) {\n        newViewport = offViewport\n    } else {\n        const onEdge = checkEdges({ state, newCursorLocation })\n        if (onEdge) {\n            newViewport = onEdge // maybe better to fire action\n        }\n    }\n    const {\n        heights,\n        widths,\n        totalCols,\n        totalRows,\n    } = state\n\n    if (newViewport) {\n        return {\n            viewport: newViewport,\n            viewportBottom: getViewportBottom({ heights, viewport: newViewport, totalRows }),\n            viewportRight: getViewportRight({ widths, viewport: newViewport, totalCols }),\n        }\n    } else return {}\n\n}\n","import {combineReducers} from 'redux';\nimport grid from './gridReducer';\n\nconst rootReducer = combineReducers({\n    grid\n});\n\nexport default rootReducer;","import initialState from './initialState';\nimport { \n\tSET_CURSOR,\n\tSET_EDITING,\n\tSET_VALUE,\n\tRESET_STARTING_EDITOR_VALUE,\n\tTOGGLE_SHIFT_GRID,\n    JUMP,\n\tSCROLL,\n    REFRESH_VIEWPORT,\n} from '../actions/constants';\n\nimport {\n\toffGrid,\n} from '../../magic/helpers/gridHelpers'\n\t\nimport {\n\tsetLocalStorage,\n} from '../../magic/helpers/fileHelpers'\n\t\nimport {\n    jump,\n} from '../../magic/helpers/jump'\n\t\nimport {\n\tgetViewportRight,\n    getViewportBottom,\n    scroll,\n    validatedViewPort,\n} from '../../magic/helpers/viewportHelpers'\n\t\nimport {\n    updateCellAndGrid,\n} from '../../magic/helpers/formulaHelpers'\n\n\nexport default function grid(state = initialState, action) {\n\tlet newState\n    let newCursorLocation\n\n\tswitch (action.type) {\n        case SCROLL:\n            return scroll(action, state)\n\n\t\tcase SET_EDITING:\n\t\t\tnewState = {\n\t\t\t\t...state,\n\t\t\t\teditingLocation: action.off ? false : [action.row, action.col],\n\t\t\t\tcellEditorStartingValue: action.value,\n\t\t\t}\n\t\t\treturn newState\n\t\t\n\t\tcase SET_CURSOR:\n\t\t\tif (offGrid(state, [action.row, action.col])) {\n                return state\n            }\n            newCursorLocation = [action.row, action.col]\n\n            return {\n                ...state,\n                cursorLocation: newCursorLocation,\n                ...validatedViewPort({state, newCursorLocation}),\n            }\n\n        case JUMP:\n            newCursorLocation = jump(action.direction, state)\n            return {\n                ...state,\n                cursorLocation: newCursorLocation,\n                ...validatedViewPort({ state, newCursorLocation }),\n            }\n\t\t\n        case SET_VALUE:\n            const newGrid = updateCellAndGrid({grid: state.values, action})\n\t\t\tnewState = {\n                ...state,\n                values: newGrid\n            }\n            setLocalStorage('rcell', newState)\n            return newState\n\t\t\t\n\t\tcase TOGGLE_SHIFT_GRID:\n\t\t\tnewState = {\n\t\t\t\t...state,\n\t\t\t\tgridShifted: !state.gridShifted,\n\t\t\t}\n\t\t\treturn newState\n\t\t\t\n\t\tcase RESET_STARTING_EDITOR_VALUE:\n\t\t\tnewState = {\n\t\t\t\t...state,\n\t\t\t\tcellEditorStartingValue: undefined,\n\t\t\t}\n\t\t\treturn newState\n\t\t\t\n\t\tcase REFRESH_VIEWPORT:\n\t\t\tnewState = {\n\t\t\t\t...state,\n\t\t\t\tviewportBottom: getViewportBottom(state),\n\t\t\t\tviewportRight: getViewportRight(state),\n\t\t\t}\n\t\t\treturn newState\n\t\t\t\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from '../reducers/allReducers';\n    \nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancer(applyMiddleware(thunk)),\n);\n\nexport default store;","import React from 'react'\n\nexport default ({ gridShifted, actions }) => {\n    return (\n        <button\n            className=\"grid-shift-button\"\n            onClick={actions.toggleShiftGrid}\n        >\n            {gridShifted ? 'unshift' : 'shiftGrid'}\n        </button>\n    )\n}\n\n","import { \n    SET_CURSOR, \n    SET_EDITING,\n    SET_VALUE,\n    RESET_STARTING_EDITOR_VALUE,\n    TOGGLE_SHIFT_GRID,\n\n    REFRESH_VIEWPORT,\n    SCROLL,\n    JUMP,\n} from './constants'\n\nexport const setCursor = (row, col) => {\n    return { type: SET_CURSOR, row, col, }\n}\n\nexport const setEditing = ({row, col, value, off}) => {\n    return { type: SET_EDITING, row, col, value, off }\n}\n\nexport const resetStartingEditorValue = () => {\n    return { type: RESET_STARTING_EDITOR_VALUE, }\n}\n\nexport const setValue = ({value, row, col}) => {\n    return { type: SET_VALUE, row, col, value }\n}\n\nexport const scroll = (direction, value = 1) => {\n    return { type: SCROLL, direction, value } // actually didnt do anything with this value in the reducer yet!\n}\n\nexport const jump = ( direction ) => {\n    return { type: JUMP, direction }\n}\n\nexport const refreshViewportDimensions = () => {\n    return { type: REFRESH_VIEWPORT }\n}\n\nexport const toggleShiftGrid = () => {\n    return { type: TOGGLE_SHIFT_GRID, }\n}\n\n// import * as constants from './constants';\n// export function receiveStuff(data) {\n//     return {}\n//     // return {type: constants.RECEIVE_STUFF, stuff: data};\n// }\n\n// export function fetchStuff() {\n//     return (dispatch) => {\n//         fetch('https://jsonplaceholder.typicode.com/users')\n//             .then(response =>\n//                 response.json().then(data => ({\n//                     data: data,\n//                     status: response.status\n//                 }))\n//             )\n//             .then(response => {\n//                 if(response.status === 200){\n//                     dispatch(receiveStuff(response.data))\n//                 }else{\n//                     var flash = {\n//                         type: 'error',\n//                         title: 'Error getting task list',\n//                         content: 'There was an error getting the task list. Please try again.'\n//                     }\n//                     dispatch({type: \"DISPLAY_FLASH\", data: flash})\n//                 }\n//             });\n//     };\n// }\n\n","import React from 'react'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport ShiftGrid from './ShiftGrid'\n\nimport * as actions from '../../redux/actions/actions'\n\n\nclass ToolBar extends React.Component {\n    static propTypes = {\n        actions: PropTypes.object,\n        gridShifted: PropTypes.bool,\n    }\n    render() {\n        return (\n            <div className='tool-bar'>\n                <ShiftGrid\n                    gridShifted={this.props.gridShifted}\n                    actions={this.props.actions}\n                />\n            </div>\n        )\n    }\n}\n\n\nfunction mapStateToProps(state) {\n    return {\n        gridShifted: state.grid.gridShifted,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators(actions, dispatch)\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(ToolBar)","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\n\nimport * as actions from '../../../redux/actions/actions'\nimport { colLetterFromNumber } from '../../../magic/helpers/formulaHelpers'\n\n\nclass HeaderCell extends React.Component {  // wish this could extend cell.jsx\n    static propTypes = {\n        actions: PropTypes.object,\n        row: PropTypes.number,\n        col: PropTypes.number,\n        type: PropTypes.string.isRequired,\n    }\n    \n    renderLabel = () => {\n        const { type, col, row } = this.props\n        if (type === 'col') {\n            return colLetterFromNumber(col)\n        } else if (type === 'row') {\n            return row + 1\n        }\n    }\n\n    getClass = () => {\n        let className = `header-cell ${this.props.type}`\n        const value = this.props.type === 'col' ? this.props.col : this.props.row\n        className += ` color${value % 8}${this.props.type}`\n        if (this.props.isCursor) {\n            className += ' header-cursor'\n        }\n        return className\n\n    }\n\n    getStyle = () => {\n        return {\n            width: `${this.props.colWidth}px`\n        }\n    }\n\n    render() {\n        return (\n            <div className={this.getClass()} style={this.getStyle()}>\n                {this.renderLabel()}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        gridShifted: state.grid.gridShifted,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators(actions, dispatch),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(HeaderCell)  // Instead of making all header cells have to connect, can I make a SelectAll cell which extends HeaderCell?","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport HeaderCell from '../Cells/HeaderCell'\n\nclass HeaderRow extends React.Component {\n    static propTypes = {\n        actions: PropTypes.object,\n        totalCols: PropTypes.number.isRequired,\n    }\n\n    totalDisplayCols = () => {\n        return Math.min(this.props.totalCols, this.props.viewportRight)\n    }\n\n    renderHeaderCells = () => {\n        let cols = []\n        for (let colIdx = this.props.viewport[1]; colIdx < this.totalDisplayCols(); colIdx++) {\n            cols.push(\n                <HeaderCell\n                    type={'col'}\n                    key={colIdx}\n                    col={colIdx}\n                    colWidth={this.props.widths[colIdx]}\n                    isCursor={colIdx === this.props.cursorLocation[1]}\n                />\n            )\n        }\n\n        return cols\n    }\n\n    render() {\n        return (\n            <div className=\"header-row\">\n                {this.renderHeaderCells()}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        totalCols: state.grid.totalCols,\n        cursorLocation: state.grid.cursorLocation,\n        widths: state.grid.widths,\n        viewport: state.grid.viewport,\n        viewportRight: state.grid.viewportRight,\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n)(HeaderRow)","import React from 'react'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport * as actions from '../../redux/actions/actions'\nimport HeaderCell from './Cells/HeaderCell'\n\nclass HeaderColumn extends React.Component {\n    static propTypes = {\n        actions: PropTypes.object,\n        cursorLocation: PropTypes.array\n    }\n\n    totalViewportRows = () => {\n        const viewportRows = this.props.viewportBottom + this.props.viewport[0]\n        return Math.min(this.props.totalRows, viewportRows)\n    }\n\n    renderHeaderCells = () => {\n        let cols = []\n        for (let rowIdx = this.props.viewport[0]; rowIdx < this.totalViewportRows(); rowIdx++) {\n            cols.push(\n                <HeaderCell\n                    type={'row'}\n                    key={rowIdx}\n                    row={rowIdx}\n                    isCursor={rowIdx === this.props.cursorLocation[0]}\n                />\n            )\n        }\n        return cols\n    }\n\n\n    render() {\n        return (\n            <div className=\"header-column\">\n                {this.renderHeaderCells()}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        totalRows: state.grid.totalRows,\n        cursorLocation: state.grid.cursorLocation,\n        viewport: state.grid.viewport,\n        viewportBottom: state.grid.viewportBottom,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators(actions, dispatch)\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(HeaderColumn)","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport HeaderCell from './HeaderCell'\n\nexport default class HeaderCorner extends HeaderCell {\n    static propTypes = {\n        actions: PropTypes.object,\n    }\n\n\n    render() {\n        return (\n            <div className=\"header-cell corner\">\n            </div>\n        )\n    }\n}\n","import React from 'react'\nimport {bindActionCreators} from 'redux'\nimport {connect} from 'react-redux'\n\nimport PropTypes from 'prop-types'\nimport * as actions from '../../../redux/actions/actions'\n\nclass CellEditor extends React.PureComponent {\n    static propTypes = {\n        actions: PropTypes.object,\n        isEditing: PropTypes.bool,\n        value: PropTypes.string,\n        row: PropTypes.number,\n        col: PropTypes.number,\n    }\n\n    state = {\n        value: this.props.value,\n    }\n\n    componentDidMount() {\n        this.props.actions.resetStartingEditorValue()\n    }\n\n    handleChange =  (e) => {\n        this.cursor = e.target.selectionStart;\n        this.setState({ value: e.target.value });\n    }\n    \n    handleEnter = ()=> {\n        const { row, col, } = this.props\n        const { value } = this.state\n        this.props.actions.setEditing({ off: true })\n        this.props.actions.setValue({ value, row, col }) // make it a promise here?\n        this.props.handleChange()\n    }\n    \n    handleEsc = (e) => {\n        this.props.actions.setEditing({off: true})\n    }\n    \n    handleTab = (e) => {\n        const { row, col, } = this.props\n        const { value } = this.state\n        this.props.actions.setValue({ value, row, col })\n        this.props.actions.setEditing({off: true})\n        this.props.handleChange()\n    }\n    \n    handleKeyPress = (e) => {\n        switch (e.charCode) {\n            case 13:\n            e.preventDefault()\n            this.handleEnter()\n            break;\n            \n            default:\n            break;\n        }\n    }\n    \n    handleKeyDown = (e) => {\n        //change to using descriptive `key` not keycode\n        switch (e.key) {\n            case 'Tab':\n            e.preventDefault()\n                this.handleTab()\n                break;\n        \n            case 'Escape':\n            e.preventDefault()\n                this.handleEsc()\n                break;\n        \n            default:\n                break;\n        }\n    }\n\n    getClass = () => {\n        return ''\n\n    }\n\n    render() {\n        \n        return (\n            <div className={this.getClass()}>\n                <input \n                    className=\"cell-editor-input\"\n                    type=\"text\" \n                    value={this.state.value}\n                    onChange={this.handleChange} \n                    onKeyPress={this.handleKeyPress}\n                    onKeyDown={this.handleKeyDown}\n                    autoFocus\n                    // onChange={this.handleChange}\n                    onFocus={this.onFocus}\n                    onBlur={this.onBlur}\n                />\n            </div>\n        )\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n       actions: bindActionCreators(actions, dispatch)\n    }\n}\n\nexport default connect(\n    null,\n    mapDispatchToProps,\n)(CellEditor)","import React from 'react'\nimport CellEditor from './CellEditor'\nimport {bindActionCreators} from 'redux'\nimport {connect} from 'react-redux'\n\nimport PropTypes from 'prop-types'\nimport * as actions from '../../../redux/actions/actions'\n\nclass Cell extends React.Component {\n    static propTypes = {\n        actions: PropTypes.object,\n        isCursor: PropTypes.bool,\n        isEditing: PropTypes.bool,\n        row: PropTypes.number.isRequired,\n        col: PropTypes.number.isRequired,\n    }\n\n    state = {\n        flip: false,\n    }\n\n    getClass = () => {\n        let className = this.props.isCursor ? 'cell cursor' : 'cell'\n        return className\n        \n    }\n    \n    getContainerClass = () => {\n        let className = 'cell-container'\n        if (this.state.flip) className += ' flip'\n        return className    \n    }\n\n    setFlip = () => {\n        this.setState({\n            flip: true\n        })\n        setTimeout(()=>{\n            this.setState({flip: false})\n        }, 1000)\n    }\n    \n    handleChange = () => {\n        this.setFlip()\n    }\n\n    handleClick = () => {\n        const { row, col, actions, isCursor } = this.props\n        if (!isCursor) actions.setCursor(row, col)\n    }\n    \n    handleDoubleClick = () => {\n        const { row, col, actions, isEditing } = this.props\n        if (!isEditing) {\n            actions.setCursor(row, col)\n            actions.setEditing({ row, col })\n        }\n    }\n\n    render() {\n        const editorValue = [undefined].includes(this.props.cellEditorStartingValue) ? this.props.enteredValue : this.props.cellEditorStartingValue\n        const style = {\n            width: `${this.props.colWidth}px`\n        }\n        return (\n            <div className={this.getContainerClass()} onClick={this.handleClick} onDoubleClick={this.handleDoubleClick} style={style}>\n                <div className={this.getClass()}>\n                    {this.props.isEditing && (\n                        <CellEditor\n                            value={editorValue}\n                            row={this.props.row}\n                            col={this.props.col}\n                            handleChange={this.handleChange}\n                        />\n                    )}\n                    {!this.props.isEditing && (\n                        <div className=\"cell-display\">\n                            {this.props.displayValue}\n                        </div>\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n       actions: bindActionCreators(actions, dispatch)\n    }\n}\n\nexport default connect(\n    null,\n    mapDispatchToProps,\n)(Cell)","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport Cell from '../Cells/Cell'\n\nclass Row extends React.Component {\n    static propTypes = {\n        totalCols: PropTypes.number.isRequired,\n        row: PropTypes.number.isRequired,\n        values: PropTypes.array.isRequired,\n    }\n\n    totalDisplayCols = () => {\n        return Math.min(this.props.totalCols, this.props.viewportRight)\n    }\n\n\n    renderCells = () => {\n        let cols = []\n        for (let colIdx = this.props.viewport[1]; colIdx < this.totalDisplayCols(); colIdx++) {\n            let isEditing = this.props.editingLocation === colIdx\n            const cellEditorStartingValue = isEditing ? this.props.cellEditorStartingValue : undefined\n            cols.push(\n                <Cell\n                    key={colIdx}\n                    col={colIdx}\n                    colWidth={this.props.widths[colIdx]}\n                    row={this.props.row}\n                    isCursor={this.props.cursorLocation === colIdx}\n                    isEditing={isEditing}\n                    cellEditorStartingValue={cellEditorStartingValue}\n                    displayValue={this.props.values[colIdx].displayValue}\n                    enteredValue={this.props.values[colIdx].enteredValue}\n                />\n            )\n        }\n        return cols\n    }\n\n    render() {\n        const shift = this.props.gridShifted && this.props.row % 2 !== 0 \n        return (\n            <div className={`row${shift ? ' row-shifted' : ''}`}>\n                {this.renderCells()}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        totalCols: state.grid.totalCols,\n        gridShifted: state.grid.gridShifted,\n        widths: state.grid.widths,\n        viewportRight: state.grid.viewportRight,\n        viewport: state.grid.viewport,\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n)(Row)","import React from 'react'\nimport {connect} from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport Row from './Row'\n\n\nclass Rows extends React.Component {\n    static propTypes = {\n        actions: PropTypes.object,\n        totalRows: PropTypes.number.isRequired,\n        cursorLocation: PropTypes.array,\n        editingLocation: PropTypes.oneOfType([\n            PropTypes.array,\n            PropTypes.bool,\n        ]),\n        values: PropTypes.array,\n    }\n\n    isEditing = (rowIdx) => {\n        return this.props.editingLocation && this.props.editingLocation.length && this.props.editingLocation[0] === rowIdx\n    }\n\n    getRowProps = (rowIdx) => {\n        const cursorLocation = this.props.cursorLocation[0] === rowIdx ? this.props.cursorLocation[1] : undefined\n        let editingLocation\n        let cellEditorStartingValue\n        if (this.isEditing(rowIdx)) {\n            editingLocation = this.props.editingLocation[1]\n            cellEditorStartingValue = this.props.cellEditorStartingValue\n        }\n        return {\n            cursorLocation,\n            editingLocation,\n            cellEditorStartingValue,\n        }\n    }\n\n    totalViewportRows = () => {\n        const viewportRows = this.props.viewportBottom + this.props.viewport[0]\n        return Math.min(this.props.totalRows, viewportRows)\n    }\n\n    renderRows = () => {\n        const rows = []\n        for (let rowIdx = this.props.viewport[0]; rowIdx < this.totalViewportRows(); rowIdx++) {\n            const {\n                cursorLocation,\n                editingLocation,\n                cellEditorStartingValue,\n            } = this.getRowProps(rowIdx)\n\n            rows.push(\n                <Row\n                    key={rowIdx}\n                    row={rowIdx}\n                    editingLocation={editingLocation}\n                    cursorLocation={cursorLocation}\n                    values={this.props.values[rowIdx]}\n                    cellEditorStartingValue={cellEditorStartingValue}\n                    viewport={this.props.viewport[1]}\n                    viewportRight={this.props.viewportRight}\n                />\n            )\n        }\n        return rows\n    }\n\n    render() {\n        return (\n            <div className=\"rows\">\n                {this.renderRows()}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    \n    return {\n        totalRows: state.grid.totalRows,\n        cursorLocation: state.grid.cursorLocation,\n        editingLocation: state.grid.editingLocation,\n        cellEditorStartingValue: state.grid.cellEditorStartingValue,\n        values: state.grid.values,\n        viewport: state.grid.viewport,\n        heights: state.grid.heights,\n        viewportBottom: state.grid.viewportBottom,\n        viewportRight: state.grid.viewportRight,\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n)(Rows)","import {connect} from 'react-redux'\nimport {bindActionCreators} from 'redux'\nimport * as actions from '../../redux/actions/actions'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport debounce from 'lodash/debounce'\n\n\nimport {\n    UP,\n    DOWN,\n    LEFT,\n    RIGHT,\n} from '../../redux/actions/constants';\n\nconst debounced = (fn, wait=0) => {\n    return debounce((...args) => {\n        fn(...args)\n    }, wait)\n}\n\n\nclass KeyBindings extends React.Component {\n    static propTypes = {\n        actions: PropTypes.object,\n    }\n\n    keyMap = {}\n    \n    componentDidMount() {\n        window.addEventListener('keydown', this.keyDown.bind(this))\n        window.addEventListener('keyup', this.keyUp.bind(this))\n        window.addEventListener('wheel', this.wheel.bind(this))\n    }\n\n    wheel = (e) => {\n        e.preventDefault()\n        if (e.deltaX > 10) this.scroll(RIGHT)\n        if (e.deltaX < -10) this.scroll(LEFT)\n        if (e.deltaY > 10) this.scroll(DOWN)\n        if (e.deltaY < -10) this.scroll(UP)\n        \n    }\n\n    keyUp = (e) => {\n        this.removeKey(e.keyCode)\n    }\n\n    isCommandKeyPressed = () => {\n        return this.keyMap[91] || this.keyMap[93]\n    }\n\n    addKey = (key) => {\n        this.keyMap[key] = true\n    }\n\n    removeKey = (key) => {\n        this.keyMap[key] = false\n    }\n    \n    keyDown = (e) => {\n        this.addKey(e.keyCode)\n        if (this.props.editingLocation && this.props.editingLocation.length) return\n        console.log(e.keyCode)\n        switch (e.keyCode) {\n            case 37: //left\n            e.preventDefault()\n                if (this.keyMap[18]) {\n                    this.scroll(LEFT)\n                } else if (this.isCommandKeyPressed()) {\n                    this.jump(LEFT)\n                } else {\n                    this.moveCursor(-1, 0)\n                }\n            break;\n            case 38: // up\n                e.preventDefault()\n                if (this.keyMap[18]) {\n                    this.scroll(UP)\n                } else if (this.isCommandKeyPressed()) {\n                    this.jump(UP)\n                } else {\n                    this.moveCursor(0, -1)\n                }\n                break;\n            case 39: //right\n                e.preventDefault()\n                if (this.keyMap[18]) {\n                    this.scroll(RIGHT)\n                } else if (this.isCommandKeyPressed()) {\n                    this.jump(RIGHT)\n                } else {\n                    this.moveCursor(1, 0)\n                }\n                break;\n            case 40: // down\n                e.preventDefault()\n                if (this.keyMap[18]) {\n                    this.scroll(DOWN)\n                } else if (this.isCommandKeyPressed()) {\n                    this.jump(DOWN)\n                } else {\n                    this.moveCursor(0, 1)\n                }\n                break;\n            case 9: //Tab\n                e.preventDefault()\n                if (this.keyMap[16]) {\n                    this.moveCursor(-1, 0)\n                } else {\n                    this.moveCursor(1, 0)\n                }\n                break;\n            case 8: //Backspace\n                e.preventDefault()\n                this.handleBackspace()\n                break;\n            case 13:\n                e.preventDefault()\n                this.enterEdit()\n                break;\n            default:\n                break;\n        }\n    }\n\n    handleBackspace = () => {\n        this.enterEdit('')\n    }\n\n    enterEdit = (value=undefined) => {\n        this.props.actions.setEditing({\n            row: this.props.cursorLocation[0],\n            col: this.props.cursorLocation[1],\n            value\n        })\n    }\n\n    jump = (direction) => {\n        this.props.actions.jump(direction)\n    }\n\n    \n    _moveCursor = (col, row) => {\n        const { cursorLocation, actions } = this.props\n        const newLocation = [row + cursorLocation[0], col + cursorLocation[1]]\n        actions.setCursor(...newLocation)\n    }\n    \n    _scroll = (direction) => {\n        this.props.actions.scroll(direction)\n    }\n\n    scroll = debounced(this._scroll).bind(this)\n    moveCursor = debounced(this._moveCursor).bind(this)\n\n    render() {\n        return null\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        cursorLocation: state.grid.cursorLocation,\n        editingLocation: state.grid.editingLocation,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n       actions: bindActionCreators(actions, dispatch)\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(KeyBindings)","import {connect} from 'react-redux'\nimport {bindActionCreators} from 'redux'\nimport * as actions from '../../redux/actions/actions'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nimport HeaderRow from './Rows/HeaderRow'\nimport HeaderColumn from './HeaderColumn'\nimport HeaderCorner from './Cells/HeaderCorner'\nimport Rows from './Rows/Rows'\nimport KeyBindings from './KeyBindings'\n\n\n/** \n * NEXT STEPS:\n * \n * NEEDS REFACTOR!!: \n *  - Divide up redux state, \n *  = handlers for key input\n * NEEDS TESTS!\n * UPDATE PROPTYPES (and default props!)\n * \n * \n * \n * keyboard commands - jump left right, copy paste, bold / italic / strikethrough\n * Add listener to screen height/width to invoke action setViewportBottom and Width\n * Then move on to some basic formatting like bold / italic / underline\n * Copy paste\n * Undo\n * \n * KNOWN BUGS:\n * scroll thing, scrolling down also goes right\n * some weirdness at the far right side\n * Clicking off cell enters value -- on blur?\n * \n *\n * */\n\n\nclass Viewport extends React.Component {\n\n    static propTypes = {\n        actions: PropTypes.object,\n    }\n\n    componentWillMount() {\n        this.props.actions.refreshViewportDimensions()\n    }\n\n    componentDidMount() {\n        window.scroll(0, 0)\n        console.log(window.scrollX)\n        console.log(window.scrollY)\n    }\n    render() {\n        return (\n            <div className=\"viewport\">\n                <KeyBindings/>\n                <HeaderCorner/>\n                <HeaderRow/>\n                <HeaderColumn/>\n                <Rows/>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n       actions: bindActionCreators(actions, dispatch),\n\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Viewport)","import React, { Component } from 'react';\nimport ToolBar from './components/Tools/ToolBar'\nimport Viewport from './components/Viewport/Viewport';\nclass App extends Component {\n    render() {\n        return (\n            <div className=\"app\">\n                <div className=\"upper section\">\n                    <div className='menu-bar'>Menus</div>\n                    <ToolBar/>\n                    <div className='function-bar'>FUNCTION BAR</div>\n                </div>\n                <Viewport/>\n            </div>\n        );\n    }\n}\n\nexport default App;","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { render } from 'react-dom';\nimport store from './redux/store/configureStore';\nimport App from './App';\nimport './index.css';\n\n// const store = configureStore();\n\nrender(\n    <Provider store={store}>\n          <App />\n    </Provider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}